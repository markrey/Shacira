/*.SH.*/

/*
 *  Headerfile for module ed_store
 *
 *  Generated by C-Head Version 1.3
 *  (c) 1993 by 2i Industrial Informatics GmbH
 *
 *  This file has been extracted from the source file
 *  ed_store.cpp on Monday November 05 2001  18:38:00
 */

#ifndef __ed_store__
#define __ed_store__


// Headerfiles
// ===========================================================================

#include "draw/ed_base.hpp"
#include "draw/ed_matrix.hpp"


// ===========================================================================
// Definition cdStorage
// ---------------------------------------------------------------------------
//
// "Gedaechtnis" fuer elementare Grafikoperationen
// TBD: Gemeinsamkeiten besser in Basisklasse integrieren
//
//  cBase
//   +--cdStorage
//
// ===========================================================================

class __ECL_DLLEXPORT__ cdStorage : public cBase {

public:
   inline cdStorage(int max_elems = 50) { init(max_elems); }
   virtual ~cdStorage();

protected:
   int max_elems;   // Max. Anzahl Elemente in einem Chunk
   int act_elem_idx;   // Index des naechsten freien Elements in act_chunk

private:
   void init(int max_elems);

};


// ===========================================================================
// Definition cdDeviceStore
// ---------------------------------------------------------------------------
//
// "Gedaechtnis" fuer elementare Grafikoperationen
//
//  +----+--------+       +----+--------+       +----+--------+   -+
//  | O1 |        |   +-->|On+1|        |   +-->|Om+1|        |    |
//  +----+--------+   |   +----+--------+   |   +----+--------+    |
//  | O2 |        |   |   |On+2|        |   |   |Om+2|        |    |
//  +----+--------+   |   +----+--------+   |   +----+--------+    \
//  :    :        :   |   :    :        :   |   :    :        :     + max_elems
//  +----+--------+   |   +----+--------+   |   +----+--------+    /
//  | On |        |   |   |On+m|        |   |   |LAST|  NULL  |    |
//  +----+--------+   |   +----+--------+   |   +----+--------+    |
//  |NEXT|   X----+---+   |NEXT|   X----+---+   |  <unused>   |    |
//  +----+--------+       +----+--------+       +----+--------+   -+
//  Chunk 0               Chunk 1               Chunk i
//
//  cBase
//   +--cdStorage
//       +--cdDeviceStore
//
// ===========================================================================

class __ECL_DLLEXPORT__ cdDeviceStore : public cdStorage {

public:
   inline cdDeviceStore(int max_elems = 50) : cdStorage(max_elems) { init(); }
   ~cdDeviceStore();

   enum ELEM_CMDS {
      ecLast = 0,             // Kennzeichnet letztes Element im letzten Chunk
      ecNext,                 // Zeiger auf erstes Element im naechsten Chunk
      ecNop,                  // Keine Operation
      ecMoveTo,               // moveTo
      ecDrawLine,             // drawLine
      ecDrawCircle,           // drawCircle
      ecDrawEllipse,          // drawEllipse
      ecDrawRect,             // drawRect
      ecDrawArcCW,            // drawArcCW
      ecDrawArcCCW,           // drawArcCCW
      ecDrawText,             // drawText
      ecBeginArea,            // beginArea
      ecEndArea,              // endArea
      ecSetRect,              // setRect
      ecSetXRect,             // setXRect
      ecSetColor,             // setColor
      ecSetBackColor,         // setBackColor
      ecSetFillColor,         // setFillColor
      ecSetFillPattern,       // setFillPattern
      ecSetLineStyle,         // setLineStyle
      ecSetLineWidth,         // setLineWidth
      ecSetPattern,           // setPattern
      ecSetForeMix,           // setForeMix
      ecSetBackMix,           // setBackMix
      ecSelectFont,           // selectFont
      ecDeleteFont,           // deletefont
      ecSetTextAlign,         // setTextAlign
      ecSetTextAngle,         // setTextAngle
      ecEnd
   };

   enum ELEM_FLAGS {
      efFreeText  = 1 << 0,   // Param. 1 ist Zeiger auf freizugebenden String
      efBoundary  = 1 << 1    // Kanten der gefuellten Flaeche zeichnen
   };

   struct ELEM {
      short cmd;              // Auszufuehrendes Kommando
      short flags;            // Zusaetzliche Flags
      union {                 // 1. Parameter:
         long x;              //    x-Koordinate
         long val1;           //    Erster Wert
         ELEM *next;          //    Zeiger auf naechsten Chunk
         char *text;          //    Zeiger auf Textstring
      };
      union {                 // 2. Parameter:
         long y;              //    y-Koordinate
         long val2;           //    Zweiter Wert
      };
      union {                 // 3. Parameter:
         long x2;             //    Zweite x-Koordinate
         long val3;           //    Dritter Wert
      };
      union {                 // 4. Parameter:
         long y2;             //    Zweite y-Koordinate
         long val4;           //    Vierter Wert
      };
   };

   ELEM *newElem();
   ELEM *firstElem() const;

private:
   ELEM *first_chunk;   // Erster angelegter Chunk
   ELEM *act_chunk;   // Zuletzt beschriebener Chunk

   void init();

};


// ===========================================================================
// Definition cdSpaceStore
// ---------------------------------------------------------------------------
//
// "Gedaechtnis" fuer elementare Grafikoperationen
//
//  +----+--------+       +----+--------+       +----+--------+   -+
//  | O1 |        |   +-->|On+1|        |   +-->|Om+1|        |    |
//  +----+--------+   |   +----+--------+   |   +----+--------+    |
//  | O2 |        |   |   |On+2|        |   |   |Om+2|        |    |
//  +----+--------+   |   +----+--------+   |   +----+--------+    \
//  :    :        :   |   :    :        :   |   :    :        :     + max_elems
//  +----+--------+   |   +----+--------+   |   +----+--------+    /
//  | On |        |   |   |On+m|        |   |   |LAST|  NULL  |    |
//  +----+--------+   |   +----+--------+   |   +----+--------+    |
//  |NEXT|   X----+---+   |NEXT|   X----+---+   |  <unused>   |    |
//  +----+--------+       +----+--------+       +----+--------+   -+
//  Chunk 0               Chunk 1               Chunk i
//
//  cBase
//   +--cdStorage
//       +--cdSpaceStore
//
// ===========================================================================

class __ECL_DLLEXPORT__ cdSpaceStore : public cdStorage {

public:
   inline cdSpaceStore(int max_elems = 50) : cdStorage(max_elems) { init(); }
   ~cdSpaceStore();

   enum ELEM_CMDS {
      ecLast = 0,                   // Kennzeichnet letztes Element im letzten Chunk
      ecNext,                       // Zeiger auf erstes Element im naechsten Chunk
      ecNop,                        // Keine Operation
      ecMoveTo,                     // moveTo
      ecDrawLine,                   // drawLine
      ecDrawLineSeg,                // drawLineSeg
      ecDrawCircle,                 // drawCircle
      ecDrawArc,                    // drawArc
      ecDrawBox,                    // drawBox
      ecDrawText,                   // drawText
      ecBeginArea,                  // beginArea
      ecEndArea,                    // endArea
      ecSetColor,                   // setColor
      ecSetBackColor,               // setBackColor
      ecSetFillColor,               // setFillColor
      ecSetFillPattern,             // setFillPattern
      ecSetLineStyle,               // setLineStyle
      ecSetLineWidth,               // setLineWidth
      ecSetPattern,                 // setPattern
      ecSetForeMix,                 // setForeMix
      ecSetBackMix,                 // setBackMix
      ecSelectFont,                 // selectFont
      ecDeleteFont,                 // deletefont
      ecSetTextAlign,               // setTextAlign
      ecSetTextAngle,               // setTextAngle
      ecTransformSet,               // setTransform(cdMatrix)
      ecTransformReset,             // resetTransform()
      ecTransformScale,             // scale(sx,sy)
      ecTransformTransl,            // translate(dx,dy)
      ecTransformRotate,            // rotate(sin,cos)
      ecEnd
   };

   enum ELEM_FLAGS {
      efFreeText  = 1 << 0,         // Param. 1 ist Zeiger auf freizugebenden String
      efFreeDbl   = 1 << 1,         // Param. 1 ist Zeiger auf freizugebendes double-Array
      efFreeTMat  = 1 << 2,         // Param. 1 ist Zeiger auf freizugebendes cdMatrix-Objekt
      efBoundary  = 1 << 3,         // Kanten der gefuellten Flaeche zeichnen
      efArcCW     = 1 << 4          // Kreisbogen CW (Standard: CCW)
   };

   struct ELEM {
      short cmd;                    // Auszufuehrendes Kommando
      short flags;                  // Zusaetzliche Flags
      union {                       // 1. Parameter:
         double x1;                 //    x-Koordinate
         long val1;                 //    Erster Wert
         long col;                  //    Farbwert (os_val)
         cdLineStyle::LINESTYLE ls; //    Linienstil
         cdPattern::PATTERN pat;    //    Pattern
         cdMix::MIX mix;            //    Mix-Wert
         cdAlign::ALIGN align1;     //    Erster Align-Wert
         ELEM *next;                //    Zeiger auf naechsten Chunk
         char *text;                //    Zeiger auf Textstring
         double *dbl;               //    Zeiger auf double-Array
         cdMatrix *tmat;            //    Zeiger auf cdMatrix-Objekt
      };
      union {                       // 2. Parameter:
         double y1;                 //    y-Koordinate
         long val2;                 //    Zweiter Wert
         cdAlign::ALIGN align2;     //    Zweiter Align-Wert
      };
      union {                       // 3. Parameter:
         double x2;                 //    Zweite x-Koordinate
         long val3;                 //    Dritter Wert
      };
      union {                       // 4. Parameter:
         double y2;                 //    Zweite y-Koordinate
         long val4;                 //    Vierter Wert
      };
   };

   ELEM *newElem();
   ELEM *firstElem() const;

private:
   ELEM *first_chunk;   // Erster angelegter Chunk
   ELEM *act_chunk;   // Zuletzt beschriebener Chunk

   void init();

};


#endif

/*.EH.*/
