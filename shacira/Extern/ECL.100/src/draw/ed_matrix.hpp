/*.SH.*/

/*
 *  Headerfile for module ed_matrix
 *
 *  Generated by C-Head Version 1.3
 *  (c) 1993 by 2i Industrial Informatics GmbH
 *
 *  This file has been extracted from the source file
 *  ed_matrix.cpp on Thursday May 24 2001  21:57:26
 */

#ifndef __ed_matrix__
#define __ed_matrix__


// Headerfiles
// ===========================================================================

#include "base/eb_geo2d.hpp"


// ===========================================================================
// Definition cdMatrix
// ---------------------------------------------------------------------------
//
// Definiert eine Transformationsmatrix M sowie Operationen darauf.
//
//        | M11 M12  0 |
//    M = | M21 M22  0 |
//        | Dx  Dy   1 |
//
//  cdMatrix
//
// ===========================================================================

class __ECL_DLLEXPORT__ cdMatrix {

public:

   // Transformationsmatrix
   double M11, M12;
   double M21, M22;
   double Dx,  Dy;


   // Default-Konstruktor (Einheitsmatrix)
   cdMatrix();
   // Copy-Konstruktor
   cdMatrix(const cdMatrix& other);
   // Konstruktor ueber Einzelkomponenten
   cdMatrix(double m11, double m12, double m21, double m22, double dx, double dy);

   // Multiplikation (Ma * Mb => Mc)
   friend cdMatrix operator*(const cdMatrix& ma, const cdMatrix& mb);
   // Multiplikation und Zuweisung
   cdMatrix& operator*=(const cdMatrix& other);

   // Einheitsmatrix herstellen
   void makeIdent();

   // Transformation von Koordinaten
   void trans(double& x, double& y) const
      { x = M11*x + M21*y + Dx;
        y = M12*x + M22*y + Dy; }
   // Transformation eines Vektors
   c2dVector trans(const c2dVector& v) const
      { return c2dVector(M11*v.x + M21*v.y + Dx, M12*v.x + M22*v.y + Dy); }
   // Transformation eines Punktes
   c2dPoint trans(const c2dPoint& p) const
      { return c2dVector(M11*p.x + M21*p.y + Dx, M12*p.x + M22*p.y + Dy); }

};


// ===========================================================================
// Definition cdMatrixScale
// ---------------------------------------------------------------------------
//
// Konstruktion von Matrizen zur Skalierung
//
//        | sx  0   0 |
//    M = | 0   sy  0 |
//        | 0   0   1 |
//
//  cdMatrix
//   +--cdMatrixScale
//
// ===========================================================================

class __ECL_DLLEXPORT__ cdMatrixScale : public cdMatrix {

public:

   // Gleiche Skalierung in x und y
   cdMatrixScale(double scale) :
      cdMatrix(scale, 0.0  ,
               0.0  , scale,
               0.0  , 0.0  ) { }

   // Unabhaengige Skalierung in x und y
   cdMatrixScale(double scale_x, double scale_y) :
      cdMatrix(scale_x, 0.0    ,
               0.0    , scale_y,
               0.0    , 0.0    ) { }

};


// ===========================================================================
// Definition cdMatrixRot
// ---------------------------------------------------------------------------
//
// Konstruktion von Matrizen zur Rotation
//
//        | cos_a -sin_a  0 |
//    M = | sin_a  cos_a  0 |
//        | 0      0      1 |
//
//  cdMatrix
//   +--cdMatrixRot
//
// ===========================================================================

class __ECL_DLLEXPORT__ cdMatrixRot : public cdMatrix {

public:

   // Rotation um Winkel 'angle' (Bogenmass)
   cdMatrixRot(double angle)
   {
      double sin_angle = sin(angle);
      double cos_angle = cos(angle);

      M11 = cos_angle; M12 = -sin_angle;
      M21 = sin_angle; M22 = cos_angle;
   }

   // Rotation um Winkel 'angle' (gegeben sin_angle, cos_angle)
   cdMatrixRot(double sin_angle, double cos_angle) :
      cdMatrix(cos_angle, -sin_angle,
               sin_angle,  cos_angle,
               0.0      ,  0.0      ) { }

};


// ===========================================================================
// Definition cdMatrixTransl
// ---------------------------------------------------------------------------
//
// Konstruktion von Matrizen zur Translation
//
//        | 1   0   0 |
//    M = | 0   1   0 |
//        | dx  dy  1 |
//
//  cdMatrix
//   +--cdMatrixTransl
//
// ===========================================================================

class __ECL_DLLEXPORT__ cdMatrixTransl : public cdMatrix {

public:

   // Translation um dx, dy
   cdMatrixTransl(double dx, double dy) :
      cdMatrix(1.0, 0.0,
               0.0, 1.0,
               dx , dy ) { }

   // Translation um Vektor
   cdMatrixTransl(const c2dVector& v) :
      cdMatrix(1.0, 0.0,
               0.0, 1.0,
               v.x, v.y) { }

};


#endif

/*.EH.*/
